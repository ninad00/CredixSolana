import{c as A,j as x,I as K,q as e,x as S,y as H,D as X,F as Q,P as U}from"./index-CjnjuBa7.js";import{I as Y,d as P,C as I,a as z,c as W}from"./source-D5IHAeb_.js";import{B as ee}from"./badge-BxdiXEyU.js";import{L as B}from"./loader-circle-7ldIs9E8.js";import{C as te}from"./coins-dbBkBZ8G.js";import{C as ne}from"./circle-check-big-B4TZtbPP.js";import{E as ae}from"./external-link-bb4un51E.js";/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],se=A("chart-no-axes-column-increasing",re);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ie=A("hash",oe);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],de=A("search",ce);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ue=A("shield-check",me);/**
 * @license lucide-react v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],pe=A("users",le),D={address:"AM4tcZNBHBGaDeLEPgzuoEJbHbXqn2odYm9yXC93iUu",metadata:{name:"interest",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},instructions:[{name:"deposit_collateral",discriminator:[156,131,142,116,146,247,162,120],accounts:[{name:"user",writable:!0,signer:!0},{name:"token_mint"},{name:"user_token_account",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program"},{kind:"account",path:"token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_data",writable:!0,pda:{seeds:[{kind:"const",value:[117,115,101,114]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"deposit",writable:!0,pda:{seeds:[{kind:"const",value:[100,101,112,111,115,105,116]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"config",pda:{seeds:[{kind:"const",value:[99,111,110,102,105,103]},{kind:"account",path:"token_mint"}]}},{name:"vault",writable:!0},{name:"token_program"},{name:"system_program",address:"11111111111111111111111111111111"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}],args:[{name:"amount",type:"u64"}]},{name:"give_liquidity",discriminator:[243,205,169,207,77,123,63,7],accounts:[{name:"user",writable:!0,signer:!0},{name:"token_mint"},{name:"user_token_account",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program"},{kind:"account",path:"token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"lp_data",writable:!0,pda:{seeds:[{kind:"const",value:[108,112]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"liq_deposit",writable:!0,pda:{seeds:[{kind:"const",value:[108,105,113,95,100,101,112,111,115,105,116]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"config",writable:!0,pda:{seeds:[{kind:"const",value:[99,111,110,102,105,103]},{kind:"account",path:"token_mint"}]}},{name:"vault",writable:!0},{name:"token_program"},{name:"system_program",address:"11111111111111111111111111111111"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}],args:[{name:"amount",type:"u64"}]},{name:"liquidate_user",discriminator:[121,20,69,108,54,153,66,95],accounts:[{name:"engine",pda:{seeds:[{kind:"const",value:[101,110,103,105,110,101]}]}},{name:"user_data",writable:!0,pda:{seeds:[{kind:"const",value:[117,115,101,114]},{kind:"account",path:"user_data.user",account:"UserData"},{kind:"account",path:"token_mint"}]}},{name:"deposit",writable:!0,pda:{seeds:[{kind:"const",value:[100,101,112,111,115,105,116]},{kind:"account",path:"user_data.user",account:"UserData"},{kind:"account",path:"token_mint"}]}},{name:"liquidator",writable:!0,signer:!0},{name:"token_mint"},{name:"config",pda:{seeds:[{kind:"const",value:[99,111,110,102,105,103]},{kind:"account",path:"token_mint"}]}},{name:"vault",writable:!0,pda:{seeds:[{kind:"account",path:"config"},{kind:"account",path:"token_program"},{kind:"account",path:"token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"liquidator_token_account",writable:!0,pda:{seeds:[{kind:"account",path:"liquidator"},{kind:"account",path:"token_program"},{kind:"account",path:"token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"dsc_mint",writable:!0},{name:"liquidator_dsc_account",writable:!0,pda:{seeds:[{kind:"account",path:"liquidator"},{kind:"account",path:"token_program"},{kind:"account",path:"dsc_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"price",writable:!0,pda:{seeds:[{kind:"const",value:[112,114,105,99,101]},{kind:"account",path:"token_mint"}]}},{name:"system_program",address:"11111111111111111111111111111111"},{name:"token_program"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}],args:[{name:"debt_to_cover",type:"u64"},{name:"new_price",type:"u64"}]},{name:"mint_dsc",discriminator:[142,219,102,161,136,60,179,173],accounts:[{name:"engine",pda:{seeds:[{kind:"const",value:[101,110,103,105,110,101]}]}},{name:"user_data",writable:!0,pda:{seeds:[{kind:"const",value:[117,115,101,114]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"token_mint",relations:["config"]},{name:"user",writable:!0,signer:!0},{name:"dsc_mint",writable:!0},{name:"deposit",pda:{seeds:[{kind:"const",value:[100,101,112,111,115,105,116]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"config",pda:{seeds:[{kind:"const",value:[99,111,110,102,105,103]},{kind:"account",path:"token_mint"}]}},{name:"price",writable:!0,pda:{seeds:[{kind:"const",value:[112,114,105,99,101]},{kind:"account",path:"token_mint"}]}},{name:"user_dsc_account",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program"},{kind:"account",path:"dsc_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"system_program",address:"11111111111111111111111111111111"},{name:"token_program"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}],args:[{name:"amount",type:"u64"},{name:"new_price",type:"u64"}]},{name:"redeem_liquidity",discriminator:[180,117,142,137,227,225,97,211],accounts:[{name:"user",writable:!0,signer:!0,relations:["liq_deposit"]},{name:"lp_data",writable:!0,pda:{seeds:[{kind:"const",value:[108,112]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"token_mint",relations:["liq_deposit","config"]},{name:"liq_deposit",writable:!0,pda:{seeds:[{kind:"const",value:[108,105,113,95,100,101,112,111,115,105,116]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"config",writable:!0,pda:{seeds:[{kind:"const",value:[99,111,110,102,105,103]},{kind:"account",path:"token_mint"}]}},{name:"vault",writable:!0,pda:{seeds:[{kind:"account",path:"config"},{kind:"account",path:"token_program"},{kind:"account",path:"token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_token_account",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program"},{kind:"account",path:"token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"system_program",address:"11111111111111111111111111111111"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"token_program"}],args:[]},{name:"start_engine",discriminator:[47,24,94,248,13,125,158,142],accounts:[{name:"engine",writable:!0,pda:{seeds:[{kind:"const",value:[101,110,103,105,110,101]}]}},{name:"authority",writable:!0,signer:!0},{name:"dsc_mint"},{name:"system_program",address:"11111111111111111111111111111111"},{name:"token_program"}],args:[{name:"liquidation_threshold",type:"u64"},{name:"min_health_factor",type:"u64"},{name:"liquidation_bonus",type:"u64"},{name:"fee_percent",type:"u64"}]},{name:"start_token",discriminator:[253,172,159,168,69,117,168,65],accounts:[{name:"config",writable:!0,pda:{seeds:[{kind:"const",value:[99,111,110,102,105,103]},{kind:"account",path:"token_mint"}]}},{name:"price",writable:!0,pda:{seeds:[{kind:"const",value:[112,114,105,99,101]},{kind:"account",path:"token_mint"}]}},{name:"token_mint"},{name:"vault",writable:!0,pda:{seeds:[{kind:"account",path:"config"},{kind:"account",path:"token_program"},{kind:"account",path:"token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"admin",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"},{name:"token_program"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"}],args:[{name:"_price",type:"u64"}]},{name:"temp",discriminator:[221,138,209,235,107,243,152,193],accounts:[{name:"user",writable:!0,signer:!0},{name:"user_data",writable:!0,pda:{seeds:[{kind:"const",value:[117,115,101,114]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"token_mint"}],args:[{name:"hfbn",type:"u64"}]},{name:"withdraw_collateral",discriminator:[115,135,168,106,139,214,138,150],accounts:[{name:"user",writable:!0,signer:!0,relations:["deposit"]},{name:"user_data",writable:!0,pda:{seeds:[{kind:"const",value:[117,115,101,114]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"engine",pda:{seeds:[{kind:"const",value:[101,110,103,105,110,101]}]}},{name:"token_mint",relations:["deposit","price","config"]},{name:"dsc_mint",writable:!0},{name:"deposit",writable:!0,pda:{seeds:[{kind:"const",value:[100,101,112,111,115,105,116]},{kind:"account",path:"user"},{kind:"account",path:"token_mint"}]}},{name:"price",writable:!0,pda:{seeds:[{kind:"const",value:[112,114,105,99,101]},{kind:"account",path:"token_mint"}]}},{name:"config",writable:!0,pda:{seeds:[{kind:"const",value:[99,111,110,102,105,103]},{kind:"account",path:"token_mint"}]}},{name:"vault",writable:!0,pda:{seeds:[{kind:"account",path:"config"},{kind:"account",path:"token_program"},{kind:"account",path:"token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_token_account",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program"},{kind:"account",path:"token_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"user_dsc_account",writable:!0,pda:{seeds:[{kind:"account",path:"user"},{kind:"account",path:"token_program"},{kind:"account",path:"dsc_mint"}],program:{kind:"const",value:[140,151,37,143,78,36,137,241,187,61,16,41,20,142,13,131,11,90,19,153,218,255,16,132,4,142,123,216,219,233,248,89]}}},{name:"system_program",address:"11111111111111111111111111111111"},{name:"associated_token_program",address:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"},{name:"token_program"}],args:[{name:"dsc_to_give",type:"u64"},{name:"new_price",type:"u64"}]}],accounts:[{name:"Config",discriminator:[155,12,170,224,30,250,204,130]},{name:"Deposit",discriminator:[148,146,121,66,207,173,21,227]},{name:"Engine",discriminator:[246,94,41,147,231,121,110,19]},{name:"LpData",discriminator:[248,173,196,3,123,50,218,10]},{name:"LqDeposit",discriminator:[39,77,98,106,180,33,68,207]},{name:"Price",discriminator:[50,107,127,61,83,36,39,75]},{name:"UserData",discriminator:[139,248,167,203,253,220,210,221]}],events:[{name:"HealthFactors",discriminator:[180,101,77,160,202,252,201,107]},{name:"LiquidityProvided",discriminator:[94,97,39,34,15,96,79,135]},{name:"LiquidityRedeemed",discriminator:[78,81,213,176,1,84,138,65]},{name:"TokenDeposited",discriminator:[104,7,18,187,94,141,251,120]},{name:"TokenLiquidated",discriminator:[106,151,243,246,247,212,191,12]},{name:"TokenRedeemed",discriminator:[75,7,43,228,204,167,97,76]}],errors:[{code:6e3,name:"AmountLessThanZero",msg:"Amount must be greater than zero"},{code:6001,name:"InvalidToken",msg:"Invalid token"},{code:6002,name:"LessHealthFactor",msg:"Health factor too low"},{code:6003,name:"NotEnoughTokensInCollateral",msg:"Not enough tokens in collateral"},{code:6004,name:"NoNeedToLiquidate",msg:"No need to liquidate"},{code:6005,name:"HealthFactorNotImproved",msg:"Health factor not improved"},{code:6006,name:"NotEnoughDebt",msg:"Not enough debt"},{code:6007,name:"UnauthorizedUser",msg:"Unauthorized user"},{code:6008,name:"Overflow"},{code:6009,name:"DivisionError"},{code:6010,name:"InvalidPrice"},{code:6011,name:"MathOverflow"},{code:6012,name:"MustRepayDscFirst"},{code:6013,name:"ZeroTotalLiquidity"},{code:6014,name:"CannotLiquidateSelf"},{code:6015,name:"TooMuchRepay"},{code:6016,name:"OverCollateralLimit"},{code:6017,name:"LiquidatorInsufficientDSC"}],types:[{name:"Config",type:{kind:"struct",fields:[{name:"token_mint",type:"pubkey"},{name:"total_liq",type:"u64"},{name:"total_collected",type:"u64"},{name:"vault",type:"pubkey"},{name:"authority",type:"pubkey"},{name:"bump",type:"u8"}]}},{name:"Deposit",type:{kind:"struct",fields:[{name:"user",type:"pubkey"},{name:"token_mint",type:"pubkey"},{name:"token_amt",type:"u64"},{name:"config_account",type:"pubkey"},{name:"bump",type:"u8"}]}},{name:"Engine",type:{kind:"struct",fields:[{name:"authority",type:"pubkey"},{name:"dsc_mint",type:"pubkey"},{name:"liquidation_threshold",type:"u64"},{name:"min_health_factor",type:"u64"},{name:"liquidation_bonus",type:"u64"},{name:"fee_percent",type:"u64"},{name:"bump",type:"u8"}]}},{name:"HealthFactors",type:{kind:"struct",fields:[{name:"health_factor",type:"u64"}]}},{name:"LiquidityProvided",type:{kind:"struct",fields:[{name:"user",type:"pubkey"},{name:"token",type:"pubkey"},{name:"amount",type:"u64"}]}},{name:"LiquidityRedeemed",type:{kind:"struct",fields:[{name:"user",type:"pubkey"},{name:"token",type:"pubkey"},{name:"interest",type:"u64"}]}},{name:"LpData",type:{kind:"struct",fields:[{name:"user",type:"pubkey"},{name:"token_amt",type:"u64"},{name:"token",type:"pubkey"},{name:"bump",type:"u8"}]}},{name:"LqDeposit",type:{kind:"struct",fields:[{name:"user",type:"pubkey"},{name:"token_mint",type:"pubkey"},{name:"token_amt",type:"u64"},{name:"config_account",type:"pubkey"},{name:"bump",type:"u8"}]}},{name:"Price",type:{kind:"struct",fields:[{name:"token_mint",type:"pubkey"},{name:"price",type:"u64"},{name:"bump",type:"u8"}]}},{name:"TokenDeposited",type:{kind:"struct",fields:[{name:"user",type:"pubkey"},{name:"token",type:"pubkey"},{name:"amount",type:"u64"}]}},{name:"TokenLiquidated",type:{kind:"struct",fields:[{name:"liquidator",type:"pubkey"},{name:"user",type:"pubkey"},{name:"token",type:"pubkey"},{name:"amount",type:"u64"}]}},{name:"TokenRedeemed",type:{kind:"struct",fields:[{name:"user",type:"pubkey"},{name:"token",type:"pubkey"},{name:"amount",type:"u64"}]}},{name:"UserData",type:{kind:"struct",fields:[{name:"user",type:"pubkey"},{name:"borrowed_amount",type:"u64"},{name:"primary_token",type:"pubkey"},{name:"hf",type:"u64"},{name:"token_balance",type:"u64"},{name:"bump",type:"u8"}]}}],constants:[{name:"MAXIMUM_AGE",type:"u64",value:"100"}]},ke=n=>{const c=atob(n),t=new Uint8Array(c.length);for(let d=0;d<c.length;d++)t[d]=c.charCodeAt(d);return t},g=(n,c)=>{let t=0n;for(let d=0;d<8;d++)t|=BigInt(n[c+d])<<BigInt(d)*8n;return t},q=(n,c=6)=>{const t=BigInt(10**c),d=n/t,h=n%t;return h===0n?d.toString():`${d}.${h.toString().padStart(c,"0").replace(/0+$/,"")}`},ge=n=>{var c;if((c=n.parsed)!=null&&c.type){const t=n.parsed.info||{};switch(n.parsed.type){case"transfer":return`Transferred ${t.amount||"unknown"} tokens from ${t.source||"unknown"} to ${t.destination||"unknown"}`;case"transferChecked":return`Transferred ${t.amount||"unknown"} tokens (checked) from ${t.source||"unknown"} to ${t.destination||"unknown"}`;case"mintTo":return`Minted ${t.amount||"unknown"} tokens to ${t.account||"unknown"}`;case"burn":return`Burned ${t.amount||"unknown"} tokens from ${t.account||"unknown"}`;case"approve":return`Approved ${t.delegate||"unknown"} to spend ${t.amount||"unknown"} tokens`;case"createAccount":return`Created account ${t.newAccount||"unknown"}`;case"closeAccount":return`Closed account ${t.account||"unknown"}`;case"initializeAccount":return`Initialized account ${t.account||"unknown"}`;case"initializeMint":return`Initialized mint with ${t.decimals||"unknown"} decimals`;default:return`${n.parsed.type} instruction`}}return n.program?`${n.program} program call`:"Unknown instruction"},he=n=>({[D.address]:"Interest Protocol","11111111111111111111111111111111":"System Program",TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA:"Token Program",ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL:"Associated Token Program"})[n]||`Unknown Program (${n.slice(0,8)}...)`,ye=n=>{var d,h,w;const c=(d=n.programId)==null?void 0:d.toString(),t=n.data;if(console.log("Decoding instruction:",{programId:c,data:t?t.slice(0,20)+"...":"no data"}),c===D.address&&t)try{const a=ke(t);if(console.log("Data bytes length:",a.length),console.log("First 8 bytes (discriminator):",Array.from(a.slice(0,8))),a.length>=8){const v=Array.from(a.slice(0,8));console.log("Looking for discriminator:",v);const b=D.instructions.find(o=>{const s=JSON.stringify(o.discriminator)===JSON.stringify(v);return console.log(`Checking ${o.name}:`,o.discriminator,"matches:",s),s});if(b){console.log("Found matching instruction:",b.name);const o={};let s="";switch(b.name){case"deposit_collateral":{if(a.length>=16){const r=g(a,8);o.amount=r.toString(),s=`Deposited ${q(r)} as collateral`}else s="Deposited collateral";break}case"give_liquidity":{if(a.length>=16){const r=g(a,8);o.amount=r.toString(),s=`Gave ${q(r)} liquidity`}else s="Gave liquidity";break}case"liquidate_user":{if(a.length>=24){const r=g(a,8),p=g(a,16);o.debtToCover=r.toString(),o.newPrice=p.toString(),s=`Liquidated user with debt ${q(r)}, price set to ${p}`}else s="Liquidated user";break}case"mint_dsc":{if(a.length>=24){const r=g(a,8),p=g(a,16);o.amount=r.toString(),o.newPrice=p.toString(),s=`Minted DSC: ${q(r)}, price ${p}`}else s="Minted DSC";break}case"redeem_liquidity":{s="Redeemed liquidity";break}case"start_engine":{if(a.length>=40){const r=g(a,8),p=g(a,16),T=g(a,24),L=g(a,32);o.liquidationThreshold=r.toString(),o.minHealthFactor=p.toString(),o.liquidationBonus=T.toString(),o.feePercent=L.toString(),s=`Engine started (Threshold: ${r}, MinHF: ${p}, Bonus: ${T}, Fee: ${L}%)`}else s="Engine started";break}case"start_token":{if(a.length>=16){const r=g(a,8);o.price=r.toString(),s=`Token started with price ${r}`}else s="Token started";break}case"temp":{if(a.length>=16){const r=g(a,8);o.hfbn=r.toString(),s=`Temporary HF updated: ${r}`}else s="Temp instruction executed";break}case"withdraw_collateral":{if(a.length>=24){const r=g(a,8),p=g(a,16);o.dscToGive=r.toString(),o.newPrice=p.toString(),s=`Withdrew collateral (DSC: ${q(r)}, Price: ${p})`}else s="Withdrew collateral";break}default:s=`Unknown instruction: ${b.name}`}return{instructionName:b.name,summary:s,args:o,programId:c}}else console.log("No matching instruction found for discriminator:",v)}}catch(a){console.warn("Failed to decode instruction data:",a)}return{instructionName:((h=n.parsed)==null?void 0:h.type)||n.program||"Failed to Decode",summary:ge(n),args:((w=n.parsed)==null?void 0:w.info)||{},programId:c||"Unknown"}},R=Y.toBase58(),be="https://api.devnet.solana.com",Se=()=>{const[n,c]=x.useState(R),[t,d]=x.useState([]),[h,w]=x.useState(null),[a,v]=x.useState(!1),[b,o]=x.useState(!1),[s,r]=x.useState(null),[p,T]=x.useState(void 0),[L,j]=x.useState(!0),$=new K(be,"confirmed"),F=x.useCallback(l=>{const m={},i={},u=new Set;let k=0,_=null,N=null;return l.forEach(f=>{if(f.blockTime){const y=new Date(f.blockTime*1e3);(!_||y<_)&&(_=y),(!N||y>N)&&(N=y)}k+=f.fee,f.accounts.forEach(y=>u.add(y)),f.instructions.forEach(y=>{const M=he(y.programId);m[M]=(m[M]||0)+1,i[y.instructionName]=(i[y.instructionName]||0)+1})}),{totalTransactions:l.length,programCalls:m,instructionTypes:i,uniqueAccounts:u,dateRange:{earliest:_,latest:N},totalFees:k}},[]),V=l=>{var i;if(l.length===0)return"No instructions found";const m=l.filter(u=>u.programId===R).map(u=>u.summary);return m.length>0?m.join(", "):((i=l[0])==null?void 0:i.summary)||"Unknown Action"},E=async l=>{var i;const m=[];for(const u of l)try{await new Promise(_=>setTimeout(_,20));const k=await $.getParsedTransaction(u.signature,{maxSupportedTransactionVersion:0});if(k!=null&&k.transaction){const _=k.transaction.message.instructions.map(f=>ye(f)),N=Array.from(new Set(k.transaction.message.accountKeys.map(f=>f.pubkey.toString())));m.push({signature:u.signature,blockTime:u.blockTime??null,slot:u.slot||0,status:u.confirmationStatus||"unknown",instructions:_,accounts:N,fee:((i=k.meta)==null?void 0:i.fee)||0,humanSummary:V(_)})}}catch(k){console.warn(`Failed to process transaction ${u.signature}:`,k)}return m},J=async()=>{var l;if(!n.trim()){r("Please enter a valid program ID");return}v(!0),r(null),d([]),w(null),T(void 0),j(!0);try{const m=new U(n),i=await $.getSignaturesForAddress(m,{limit:25});if(i.length>0){const u=await E(i);d(u),w(F(u)),T((l=i[i.length-1])==null?void 0:l.signature),j(i.length===25)}else j(!1)}catch(m){r(m instanceof Error?m.message:"Failed to fetch transactions")}finally{v(!1)}},Z=async()=>{var l;if(!(!p||b)){o(!0);try{const m=new U(n),i=await $.getSignaturesForAddress(m,{limit:20,before:p});if(i.length>0){const u=await E(i),k=[...t,...u];d(k),w(F(k)),T((l=i[i.length-1])==null?void 0:l.signature),j(i.length===25)}else j(!1)}catch(m){r(m instanceof Error?m.message:"Failed to fetch more transactions")}finally{o(!1)}}},G={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,staggerChildren:.1}}},O={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return e.jsx("div",{className:"w-full bg-gray-950 text-white min-h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-12 space-y-8",children:[e.jsxs(S.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:"Transaction Analyzer"}),e.jsx("p",{className:"text-lg text-gray-400 mt-2",children:"Dive deep into Solana program activity."})]}),e.jsxs(P,{className:"bg-gray-900/50 border-gray-800",children:[e.jsx(I,{children:e.jsxs(z,{className:"flex items-center gap-3 text-xl text-white",children:[e.jsx(de,{className:"h-5 w-5 text-purple-400"}),"Analyze Program"]})}),e.jsxs(W,{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-grow p-3 bg-gray-800 border border-gray-700 rounded-md text-gray-300 font-mono text-sm flex items-center break-all",children:n}),e.jsx(H,{onClick:J,disabled:a,className:"bg-purple-600 hover:bg-purple-700 text-white h-12 w-full sm:w-auto",children:a?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-5 w-5 mr-2 animate-spin"})," Analyzing..."]}):"Analyze Transactions"})]})]}),e.jsx(X,{children:s&&e.jsxs(S.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-red-900/30 text-red-400 text-sm p-3 border border-red-800 rounded-md flex items-start gap-2",children:[e.jsx(Q,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Error:"})," ",s]})]})}),h&&e.jsx(S.div,{variants:G,initial:"hidden",animate:"visible",children:e.jsxs(P,{className:"bg-gray-900/50 border-gray-800",children:[e.jsx(I,{children:e.jsx(z,{className:"text-xl text-white",children:"Analysis Summary"})}),e.jsx(W,{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(C,{icon:ie,value:h.totalTransactions,label:"Transactions"}),e.jsx(C,{icon:pe,value:h.uniqueAccounts.size,label:"Unique Accounts"}),e.jsx(C,{icon:se,value:Object.keys(h.instructionTypes).length,label:"Instruction Types"}),e.jsx(C,{icon:te,value:`${(h.totalFees/1e9).toFixed(6)} SOL`,label:"Total Fees"})]})})]})}),t.length>0&&e.jsxs(S.div,{className:"space-y-4",variants:G,initial:"hidden",animate:"visible",children:[e.jsx("h2",{className:"text-2xl font-bold text-white pt-4",children:"Transaction Details"}),t.map(l=>e.jsx(S.div,{variants:O,children:e.jsx(_e,{tx:l})},l.signature)),L&&e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(H,{onClick:Z,disabled:b,variant:"outline",className:"border-gray-700 hover:bg-gray-800",children:b?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading More..."]}):"Load More"})})]})]})})},C=({icon:n,value:c,label:t})=>e.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg p-4 flex items-center gap-4",children:[e.jsx("div",{className:"p-2 bg-purple-600/20 border border-purple-500/30 rounded-md flex-shrink-0",children:e.jsx(n,{className:"h-6 w-6 text-purple-400"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl font-bold text-white truncate",children:c}),e.jsx("div",{className:"text-sm text-gray-400",children:t})]})]}),_e=({tx:n})=>e.jsxs(P,{className:"bg-gray-900 border border-gray-800 rounded-lg p-4",children:[e.jsxs("div",{className:"ml-4 flex-grow min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Transaction Signature:"}),e.jsx("p",{className:"mt-0.5 truncate text-xs font-mono text-gray-400  px-2 py-1 rounded-lg ",children:n.signature})]}),e.jsxs(I,{className:"flex items-center gap-2 justify-between",children:[e.jsxs("div",{className:"text-green-400 text-sm p-3 border border-green-800 rounded-md flex flex-cols-2 items-start gap-2",children:[e.jsx(ne,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"flex-grow min-w-0",children:e.jsxs("a",{href:`https://explorer.solana.com/tx/${n.signature}?cluster=devnet`,target:"_blank",rel:"noreferrer",className:"text-green-400 hover:text-green-300 underline flex items-center",children:["View Transaction ",e.jsx(ae,{className:"h-3 w-3 ml-1"})]})})]}),e.jsxs(ee,{variant:n.status==="finalized"?"default":"secondary",className:"bg-green-600/20 text-green-400 border-green-500/30 flex-shrink-0",children:[e.jsx(ue,{className:"h-3 w-3 mr-1.5"}),n.status]})]})]});export{Se as default};
